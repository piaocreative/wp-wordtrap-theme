jQuery.uaMatch=function(t){"use strict";return t=t.toLowerCase(),{browser:(t=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[])[1]||"",version:t[2]||"0"}},function(C){"use strict";var N,x="ui-state-active",y="ui-state-hover",i="ui-state-disabled",S=C.ui.keyCode,T=S.UP,B=S.DOWN,M=S.RIGHT,E=S.LEFT,O=S.PAGE_UP,W=S.PAGE_DOWN,I=S.HOME,V=S.END,L=C.uaMatch.msie,c=C.uaMatch.mozilla?"DOMMouseScroll":"mousewheel",k=".uispinner",A=[T,B,M,E,O,W,I,V,S.BACKSPACE,S.DELETE,S.TAB];C.widget("ui.spinner",{options:{min:null,max:null,allowNull:!1,group:"",point:".",prefix:"",suffix:"",places:null,defaultStep:1,largeStep:10,mouseWheel:!0,increment:"slow",className:null,showOn:"always",width:95,upIconClass:"ui-icon-triangle-1-n",downIconClass:"ui-icon-triangle-1-s",addText:"+",subText:"-",format:function(t,e){var n=this,s=/(\d+)(\d{3})/,i=Number(t),o=(isNaN(t)?0:Math.abs(i)).toFixed(e)+"";for(o=o.replace(".",n.point);s.test(o)&&n.group;o=o.replace(s,"$1"+n.group+"$2"));return(t<0?"-":"")+n.prefix+o+n.suffix},parse:function(t){var e=this;return"."===e.group&&(t=t.replace(".","")),"."!==e.point&&(t=t.replace(e.point,".")),parseFloat(t.replace(/[^0-9\-\.]/g,""))}},_create:function(){var t=this,e=t.element,n=e.attr("type");!e.is("input")||"text"!==n&&"number"!==n?console.error("Invalid target for ui.spinner"):(t._procOptions(!0),t._createButtons(e),e.is(":enabled")||t.disable())},_createButtons:function(t){var o,c,e,n,p,s,h,d,f,i,m,a=this,r=a.options,v=r.className,u=r.width,l=r.showOn,g=t.outerHeight();function b(){return f&&(C(this).removeClass(x),a._stopSpin(),f=!1),!1}function _(t){if(n){if(t===p)return;clearTimeout(n)}p=t,n=setTimeout(function(){n=0,t()},100)}function w(t){for(var e=A.length,n=0;n<e;n+=1)if(A[n]===t)return 1}u=t.wrap('<span class="spinner-wrpr" />').css({width:(a.oWidth=t.outerWidth())-u+"!important",marginRight:"30px",marginLeft:"30px",textAlign:"center",float:"none",marginTop:0}).after('<span class="ui-spinner ui-widget"></span>').next(),a.wrapper=u,i=C('<div class="ui-spinner-buttons"><div class="ui-spinner-up ui-spinner-button ui-state-default ui-corner-tr"><span class="ui-icon '+r.upIconClass+'">'+r.addText+'</span></div><div class="ui-spinner-down ui-spinner-button ui-state-default ui-corner-br"><span class="ui-icon '+r.downIconClass+'">'+r.subText+"</span></div></div>"),a.btnContainer=i,m="rtl"===t[0].dir,v&&u.addClass(v),u.append(i.css({height:g,left:0,top:0})),(e=a.buttons=i.find(".ui-spinner-button")).css({width:"30px",height:+g}),e.eq(0).css({right:"0"}),e.eq(1).css({left:"0"}),o=e[0],c=e[1],e.find(".ui-icon"),i.width("135px"),"always"!==l&&i.css("opacity",0),"hover"!==l&&"both"!==l||e.add(t).on("mouseenter"+k,function(){_(function(){s=!0,a.focused&&"hover"!==l||a.showButtons()})}).on("mouseleave"+k,function(){_(function(){s=!1,a.focused&&"hover"!==l||a.hideButtons()})}),e.on("hover",function(){a.buttons.removeClass(y),r.disabled||C(this).addClass(y)},function(){C(this).removeClass(y)}).on("mousedown",function(){var t,e;return r.disabled||(t=a.element[0],e=o===this?1:-1,t.trigger("focus"),t.trigger("select"),C(this).addClass(x),f=!0,a._startSpin(e)),!1}).on("mouseup",b).on("mouseout",b),L&&e.on("dblclick",function(){return r.disabled||(a._change(),a._doSpin((this===o?1:-1)*r.step)),!1}).on("selectstart",function(){return!1}),t.on("keydown"+k,function(t){var e,n,s,i=t.keyCode;if(t.ctrl||t.alt)return!0;if(w(i)&&(d=!0),h)return!1;switch(i){case T:case O:e=1,n=i===O;break;case B:case W:y=-1,n=i===W;break;case M:case E:e=i===M^m?1:-1;break;case I:return null!==(s=a.options.min)&&a._setValue(s),!1;case V:return s=a.options.max,null!==(s=a.options.max)&&a._setValue(s),!1}return e?(h||r.disabled||(C(0<e?o:c).addClass(x),h=!0,a._startSpin(e,n)),!1):void 0}).on("keyup"+k,function(t){if(t.ctrl||t.alt)return!0;switch(w(S)&&(d=!1),t.keyCode){case T:case M:case O:case B:case E:case W:return e.removeClass(x),a._stopSpin(),h=!1}}).on("keypress"+k,function(t){if(e=t.keyCode,t=t.charCode,!d&&(t=String.fromCharCode(t||e),e=a.options,!("0"<=t&&t<="9"||"-"===t)&&!(0<a.places&&t===e.point||t===e.group)))return!1;var e}).on("change"+k,function(){a._change()}).on("focus"+k,function(){function t(){a.element.trigger("select")}L?t():setTimeout(t,0),a.focused=!0,N=a,s||"focus"!==l&&"both"!==l||a.showButtons()}).on("blur"+k,function(){a.focused=!1,s||"focus"!==l&&"both"!==l||a.hideButtons()})},_procOptions:function(t){var e,n=this,s=n.element,i=n.options,o=i.min,a=i.max,r=i.step,u=i.places,l=-1;"slow"===i.increment?i.increment=[{count:1,mult:1,delay:250},{count:3,mult:1,delay:100},{count:0,mult:1,delay:50}]:"fast"===i.increment&&(i.increment=[{count:1,mult:1,delay:250},{count:19,mult:1,delay:100},{count:80,mult:1,delay:20},{count:100,mult:10,delay:20},{count:0,mult:100,delay:20}]),null===o&&null!==(e=s.attr("min"))&&(o=parseFloat(e)),null===a&&null!==(e=s.attr("max"))&&(a=parseFloat(e)),r||null===(e=s.attr("step"))||"any"!==e&&(r=parseFloat(e),i.largeStep*=r),i.step=r=r||i.defaultStep,null===u&&-1!==(e=r+"").indexOf(".")&&(u=e.length-e.indexOf(".")-1),n.places=u,null!==a&&null!==o&&(a<o&&(o=a),l=Math.max(Math.max(l,i.format(a,u,s).length),i.format(o,u,s).length)),t&&(n.inputMaxLength=s[0].maxLength),0<(e=n.inputMaxLength)&&(l=0<l?Math.min(e,l):e,e=Math.pow(10,l)-1,(null===a||e<a)&&(a=e),e=-(e+1)/10+1,(null===o||o<e)&&(o=e)),0<l&&s.attr("maxlength",l),i.min=o,i.max=a,n._change(),s.off(c+k),i.mouseWheel&&s.on(c+k,n._mouseWheel)},_mouseWheel:function(t){var e=C.data(this,"spinner");if(!e.options.disabled&&e.focused&&e===N)return e._change(),e._doSpin((0<(t.wheelDelta||-t.detail)?1:-1)*e.options.step),!1},_setTimer:function(t,e,n){var s=this;s._stopSpin(),s.timer=setInterval(function(){s._spin(e,n)},t)},_stopSpin:function(){this.timer&&(clearInterval(this.timer),this.timer=0)},_startSpin:function(t,e){var n=this,s=n.options.increment;n._change(),n._doSpin(t*(e?n.options.largeStep:n.options.step)),s&&0<s.length&&(n.counter=0,n.incCounter=0,n._setTimer(s[0].delay,t,e))},_spin:function(t,e){var n=this,s=n.options.increment,i=s[n.incCounter];n._doSpin(t*i.mult*(e?n.options.largeStep:n.options.step)),n.counter+=1,n.counter>i.count&&n.incCounter<s.length-1&&(n.counter=0,i=s[++n.incCounter],n._setTimer(i.delay,t,e))},_doSpin:function(t){var e=this.curvalue;null===e&&(e=(0<t?this.options.min:this.options.max)||0),this._setValue(e+t)},_parseValue:function(){var t=this.element.val();return t?this.options.parse(t,this.element):null},_validate:function(t){var e=this.options,n=e.min,s=e.max;return null!==t||e.allowNull||(t=null!==this.curvalue?this.curvalue:n||s||0),null!==s&&(s<t||t===s)?(void 0!==this.buttons&&C(this.buttons[0]).addClass(i),s):null!==n&&(t<n||t===n)?(void 0!==this.buttons&&C(this.buttons[1]).addClass(i),n):(void 0!==this.buttons&&(C(this.buttons[0]).removeClass(i),C(this.buttons[1]).removeClass(i)),t)},_change:function(){var t=this._parseValue();this.selfChange||(isNaN(t)&&(t=this.curvalue),this._setValue(t,!0))},_setOption:function(t,e){C.Widget.prototype._setOption.call(this,t,e),this._procOptions()},increment:function(){this._doSpin(this.options.step)},decrement:function(){this._doSpin(-this.options.step)},showButtons:function(t){var e=this.btnContainer.stop();t?e.css("opacity",1):e.fadeTo("fast",1)},hideButtons:function(t){var e=this.btnContainer.stop();t?e.css("opacity",0):e.fadeTo("fast",0),this.buttons.removeClass(y)},_setValue:function(t,e){var n=this;n.curvalue=t=n._validate(t),n.element.val(null!==t?n.options.format(t,n.places,n.element):""),e||(n.selfChange=!0,n.element.trigger("change"),n.selfChange=!1)},value:function(t){return arguments.length?(this._setValue(t),this.element):this.curvalue},enable:function(){this.buttons.removeClass(i),this.element[0].disabled=!1,C.Widget.prototype.enable.call(this)},disable:function(){this.buttons.addClass(i).removeClass(y),this.element[0].disabled=!0,C.Widget.prototype.disable.call(this)},destroy:function(){this.wrapper.remove(),this.element.off(k).css({width:this.oWidth,marginRight:this.oMargin}),C.Widget.prototype.destroy.call(this)}})}(jQuery);